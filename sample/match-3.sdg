fn very_difficult_match(a, b, c, d) = match (a, b, c, d) {
    (None, Some(b @ 50..100), None, Some(d @ 25..75)) => f"0/{b}/{d}",
    (Some(a @ 50..100), Some(b @ 0..50), None, Some(d @ 25..75)) => f"1/{a}/{b}/{d}",
    (Some(a @ 0..50), None, Some(c @ 25..75), Some(d @ 0..50)) => f"2/{a}/{c}/{d}",
    (Some(a @ 0..50), None, Some(c @ 0..50), Some(d @ 50..100)) => f"3/{a}/{c}/{d}",
    (Some(a @ 0..50), None, Some(c), Some(d @ 0..50)) => f"4/{a}/{c}/{d}",
    (None, Some(b @ 25..75), Some(c @ 25..75), Some(d @ 0..50)) => f"5/{b}/{c}/{d}",
    (None, Some(b), Some(c @ 0..50), Some(d @ 0..50)) => f"6/{b}/{c}/{d}",
    (None, Some(b @ 50..100), Some(c @ 25..75), Some(d @ 0..50)) => f"7/{b}/{c}/{d}",
    (Some(a @ 50..100), Some(b @ 0..50), Some(c @ 50..100), Some(d @ 0..50)) => f"8/{a}/{b}/{c}/{d}",
    (Some(a @ 0..50), Some(b @ 0..50), Some(c @ 50..100), None) => f"9/{a}/{b}/{c}",
    (Some(a @ 0..50), None, Some(c), _) => f"10/{a}/{c}",
    (_, Some(b), Some(c @ 50..100), Some(d @ 0..50)) => f"11/{b}/{c}/{d}",
    (Some(a @ 50..100), Some(b), None, _) => f"12/{a}/{b}",
    (Some(a @ 0..50), Some(b @ 25..75), _, Some(d @ 50..100)) => f"13/{a}/{b}/{d}",
    (Some(a @ 50..100), Some(b @ 50..100), Some(c @ 50..100), Some(d)) => f"14/{a}/{b}/{c}/{d}",
    (Some(a), Some(b @ 25..75), _, Some(d)) => f"15/{a}/{b}/{d}",
    (Some(a @ 25..75), Some(b @ 25..75), Some(c @ 50..100), Some(d @ 25..75)) => f"16/{a}/{b}/{c}/{d}",
    (Some(a), _, _, Some(d @ 0..50)) => f"17/{a}/{d}",
    (Some(a), _, Some(c @ 0..50), None) => f"18/{a}/{c}",
    (_, Some(b @ 50..100), _, Some(d @ 0..50)) => f"19/{b}/{d}",
    (_, Some(b @ 0..50), _, _) => f"20/{b}",
    (_, Some(b @ 50..100), Some(c @ 0..50), Some(d @ 50..100)) => f"21/{b}/{c}/{d}",
    (_, _, Some(c @ 0..50), Some(d @ 25..75)) => f"22/{c}/{d}",
    (_, Some(b @ 25..75), None, Some(d @ 0..50)) => f"23/{b}/{d}",
    (_, _, Some(c @ 25..75), _) => f"24/{c}",
    (_, Some(b), Some(c @ 50..100), _) => f"25/{b}/{c}",
    (Some(a), Some(b @ 50..100), _, _) => f"26/{a}/{b}",
    (_, Some(b @ 0..50), Some(c), Some(d @ 50..100)) => f"27/{b}/{c}/{d}",
    (_, Some(b @ 25..75), Some(c @ 50..100), Some(d)) => f"28/{b}/{c}/{d}",
    (Some(a), _, Some(c), Some(d)) => f"29/{a}/{c}/{d}",
    (Some(a @ 0..50), Some(b @ 50..100), _, _) => f"30/{a}/{b}",
    (_, Some(b @ 25..75), Some(c @ 50..100), Some(d @ 50..100)) => f"31/{b}/{c}/{d}",
    (Some(a @ 0..50), _, Some(c @ 0..50), _) => f"32/{a}/{c}",
    (Some(a @ 0..50), Some(b @ 0..50), Some(c @ 25..75), _) => f"33/{a}/{b}/{c}",
    (_, Some(b), _, _) => f"34/{b}",
    (Some(a @ 50..100), Some(b @ 50..100), _, Some(d @ 50..100)) => f"35/{a}/{b}/{d}",
    (_, Some(b), _, Some(d)) => f"36/{b}/{d}",
    (Some(a @ 25..75), _, Some(c), _) => f"37/{a}/{c}",
    (None, None, Some(c @ 50..100), _) => f"38/{c}",
    (Some(a @ 50..100), None, Some(c @ 0..50), None) => f"39/{a}/{c}",
    (_, Some(b @ 25..75), _, Some(d)) => f"40/{b}/{d}",
    (_, Some(b @ 0..50), Some(c), Some(d @ 25..75)) => f"41/{b}/{c}/{d}",
    (Some(a), Some(b @ 50..100), _, Some(d @ 50..100)) => f"42/{a}/{b}/{d}",
    (Some(a @ 0..50), Some(b @ 0..50), _, Some(d @ 25..75)) => f"43/{a}/{b}/{d}",
    (Some(a @ 50..100), Some(b @ 0..50), _, _) => f"44/{a}/{b}",
    (None, _, Some(c @ 0..50), None) => f"45/{c}",
    (None, _, _, _) => f"46",
    (Some(a @ 0..50), Some(b @ 25..75), Some(c @ 0..50), Some(d @ 25..75)) => f"47/{a}/{b}/{c}/{d}",
    (_, Some(b @ 25..75), None, Some(d @ 0..50)) => f"48/{b}/{d}",
    (Some(a @ 50..100), Some(b), _, Some(d @ 25..75)) => f"49/{a}/{b}/{d}",
    (Some(a @ 25..75), Some(b), Some(c @ 25..75), Some(d @ 0..50)) => f"50/{a}/{b}/{c}/{d}",
    (Some(a @ 0..50), _, Some(c @ 0..50), Some(d @ 25..75)) => f"51/{a}/{c}/{d}",
    (Some(a @ 25..75), _, _, Some(d @ 0..50)) => f"52/{a}/{d}",
    (_, Some(b @ 0..50), _, _) => f"53/{b}",
    (_, Some(b), Some(c @ 25..75), Some(d @ 50..100)) => f"54/{b}/{c}/{d}",
    (Some(a), Some(b @ 0..50), None, _) => f"55/{a}/{b}",
    (Some(a @ 50..100), Some(b), Some(c @ 25..75), Some(d)) => f"56/{a}/{b}/{c}/{d}",
    (_, None, Some(c), Some(d @ 25..75)) => f"57/{c}/{d}",
    (_, Some(b), Some(c), _) => f"58/{b}/{c}",
    (Some(a @ 25..75), Some(b), Some(c @ 50..100), None) => f"59/{a}/{b}/{c}",
    (_, _, Some(c @ 0..50), Some(d @ 25..75)) => f"60/{c}/{d}",
    (Some(a @ 0..50), None, _, None) => f"61/{a}",
    (Some(a), _, None, Some(d)) => f"62/{a}/{d}",
    (_, Some(b @ 0..50), Some(c @ 50..100), _) => f"63/{b}/{c}",
    _ => f"64",
};

assert very_difficult_match(Some(20), Some(60), Some(80), Some(60)) == "13/20/60/60";
assert very_difficult_match(None, Some(20), Some(60), Some(80)) == "20/20";
assert very_difficult_match(Some(80), Some(60), Some(20), Some(40)) == "15/80/60/40";
assert very_difficult_match(Some(60), Some(60), Some(40), Some(80)) == "15/60/60/80";
assert very_difficult_match(None, Some(60), Some(20), Some(60)) == "21/60/20/60";
assert very_difficult_match(Some(40), Some(80), Some(60), None) == "24/60";
assert very_difficult_match(Some(40), Some(60), None, Some(40)) == "15/40/60/40";
assert very_difficult_match(Some(20), Some(60), Some(80), Some(60)) == "13/20/60/60";
assert very_difficult_match(Some(60), Some(80), Some(20), Some(40)) == "17/60/40";
assert very_difficult_match(Some(60), Some(40), None, Some(20)) == "12/60/40";
assert very_difficult_match(Some(80), Some(80), Some(40), None) == "18/80/40";
assert very_difficult_match(Some(80), None, Some(80), Some(80)) == "29/80/80/80";
assert very_difficult_match(Some(20), Some(60), None, Some(20)) == "15/20/60/20";
assert very_difficult_match(Some(40), Some(80), Some(20), Some(40)) == "17/40/40";
assert very_difficult_match(Some(40), Some(80), Some(60), None) == "24/60";
assert very_difficult_match(Some(80), Some(60), None, None) == "12/80/60";
assert very_difficult_match(None, Some(60), Some(40), Some(60)) == "21/60/40/60";
assert very_difficult_match(Some(40), Some(40), Some(80), Some(40)) == "11/40/80/40";
assert very_difficult_match(Some(20), Some(60), Some(80), Some(20)) == "11/60/80/20";
assert very_difficult_match(Some(80), Some(40), Some(80), Some(40)) == "8/80/40/80/40";
assert very_difficult_match(Some(60), None, Some(20), Some(60)) == "22/20/60";
assert very_difficult_match(Some(20), Some(60), Some(80), Some(80)) == "13/20/60/80";
assert very_difficult_match(Some(80), Some(60), Some(40), Some(60)) == "15/80/60/60";
assert very_difficult_match(Some(40), Some(20), Some(40), Some(20)) == "17/40/20";
assert very_difficult_match(Some(60), Some(80), Some(20), Some(20)) == "17/60/20";
assert very_difficult_match(Some(40), Some(60), Some(20), Some(20)) == "15/40/60/20";
assert very_difficult_match(Some(60), None, Some(60), None) == "24/60";
assert very_difficult_match(Some(20), Some(80), Some(60), Some(40)) == "11/80/60/40";
assert very_difficult_match(Some(40), Some(40), None, Some(80)) == "13/40/40/80";
assert very_difficult_match(Some(80), Some(40), Some(80), Some(60)) == "15/80/40/60";
assert very_difficult_match(None, Some(40), Some(80), None) == "20/40";
assert very_difficult_match(Some(60), None, Some(40), None) == "18/60/40";
assert very_difficult_match(Some(80), None, None, Some(80)) == "62/80/80";
assert very_difficult_match(Some(20), Some(80), Some(20), Some(20)) == "17/20/20";
assert very_difficult_match(Some(20), Some(40), Some(60), None) == "9/20/40/60";
assert very_difficult_match(Some(20), Some(40), Some(60), Some(80)) == "13/20/40/80";
assert very_difficult_match(None, None, Some(40), None) == "24/40";
assert very_difficult_match(Some(40), Some(40), Some(80), Some(60)) == "13/40/40/60";
assert very_difficult_match(Some(80), Some(20), Some(40), Some(60)) == "20/20";
assert very_difficult_match(None, Some(20), Some(80), Some(20)) == "11/20/80/20";
assert very_difficult_match(Some(60), None, Some(80), Some(20)) == "17/60/20";
assert very_difficult_match(Some(80), Some(80), Some(20), Some(80)) == "21/80/20/80";
assert very_difficult_match(Some(40), Some(40), Some(20), Some(20)) == "15/40/40/20";
assert very_difficult_match(Some(20), Some(20), None, Some(40)) == "17/20/40";
assert very_difficult_match(Some(80), Some(20), Some(60), None) == "20/20";
assert very_difficult_match(Some(80), Some(20), Some(40), Some(40)) == "17/80/40";
assert very_difficult_match(Some(40), Some(20), Some(80), Some(80)) == "20/20";
assert very_difficult_match(Some(60), Some(20), None, Some(20)) == "12/60/20";
assert very_difficult_match(Some(80), Some(80), Some(20), Some(60)) == "21/80/20/60";
assert very_difficult_match(Some(20), Some(80), None, Some(20)) == "17/20/20";
assert very_difficult_match(Some(20), Some(80), Some(20), Some(20)) == "17/20/20";
assert very_difficult_match(Some(60), Some(20), Some(60), Some(40)) == "8/60/20/60/40";
assert very_difficult_match(Some(80), Some(80), Some(60), Some(80)) == "14/80/80/60/80";
assert very_difficult_match(Some(20), Some(40), Some(20), None) == "18/20/20";
assert very_difficult_match(Some(40), Some(40), Some(60), None) == "9/40/40/60";
assert very_difficult_match(Some(40), Some(80), Some(60), None) == "24/60";
assert very_difficult_match(None, Some(60), Some(80), Some(80)) == "25/60/80";
assert very_difficult_match(Some(20), None, Some(20), Some(20)) == "4/20/20/20";
assert very_difficult_match(Some(80), Some(60), Some(60), Some(40)) == "11/60/60/40";
assert very_difficult_match(Some(80), Some(20), Some(60), None) == "20/20";
assert very_difficult_match(None, Some(60), None, Some(60)) == "0/60/60";
assert very_difficult_match(Some(60), Some(60), Some(60), Some(40)) == "11/60/60/40";
assert very_difficult_match(None, Some(80), Some(20), Some(20)) == "6/80/20/20";
assert very_difficult_match(Some(40), Some(20), None, Some(40)) == "17/40/40";
