//# assert success, "compilation and assertions all must succeed"
//# assert len(warnings) == 5, f"expected exactly 5 warnings, got {len(warnings)} warnings"
//# assert all([warning.index == 5000 for warning in warnings]), "expected all the warnings to be warning-5000, but some are not"

//# assert any(["`x3`" in warning.title for warning in warnings])
//# assert any(["`local3`" in warning.title for warning in warnings])
//# assert any(["`local4`" in warning.title and "`local6`" in warning.title for warning in warnings])
//# assert any(["`y`" in warning.title for warning in warnings])

let global_value = 42;

assert outer(10, 20, 30) == 882;
fn outer(x1, x2, x3) = {  // x3 is unused
    let local1 = 100;
    let local2 = 200;
    let local3 = 300;  // unused

    fn inner(y1, y2, y3) = {  // y2 and y3 are unused
        let local4 = 400;  // unused
        let local5 = 500;
        let local6 = 600;  // unused

        y1 + x1 + local2 + local5 + global_value
    };

    x2 + local1 + inner(10, 20, 30)
};

// x is used, y is unused.
assert { let x = 3; let y = 4; x == 3 };
